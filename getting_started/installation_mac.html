

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development Environment Setup on Mac OS &mdash; Zephyr Project Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Zephyr Project Documentation" href="../index.html"/>
        <link rel="up" title="Getting Started Guide" href="getting_started.html"/>
        <link rel="next" title="Development Environment Setup on Windows" href="installation_win.html"/>
        <link rel="prev" title="Development Environment Setup on Linux" href="installation_linux.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Zephyr Project
          

          
          </a>

          
            
            
              <div class="version">
                1.6.99
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introducing_zephyr.html">Introducing Zephyr</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="getting_started.html">Getting Started Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="getting_started.html#set-up-the-development-environment">Set Up the Development Environment</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="installation_linux.html">Development Environment Setup on Linux</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Development Environment Setup on Mac OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-a-3rd-party-toolchain">Using a 3rd Party toolchain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-requirements-and-dependencies">Installing Requirements and Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-toolchain">Setting Up the Toolchain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation_win.html">Development Environment Setup on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#checking-out-the-source-code-anonymously">Checking Out the Source Code Anonymously</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#building-and-running-an-application">Building and Running an Application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../boards/boards.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel/kernel.html">Zephyr Kernel Primer (version 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../application/application.html">Application Development Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting/porting.html">Porting Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/drivers.html">Device Drivers and Device Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subsystems/subsystems.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samples/samples.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/kconfig/index.html">Configuration Options Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/code.html">Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSING.html">Licensing of Zephyr Project components</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Zephyr Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="getting_started.html">Getting Started Guide</a> &raquo;</li>
      
    <li>Development Environment Setup on Mac OS</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/getting_started/installation_mac.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="development-environment-setup-on-mac-os">
<span id="installing-zephyr-mac"></span><h1>Development Environment Setup on Mac OS</h1>
<p>This section describes how to set up a Mac OS development system.</p>
<p>After completing these steps, you will be able to compile and run your Zephyr
applications on the following Mac OS version:</p>
<ul class="simple">
<li>Mac OS X 10.11 (El Capitan)</li>
</ul>
<p>Developing for Zephyr on OS X generally requires you to build the
toolchain yourself. However, if there is already an OS X toolchain for your
target architecture you can use it directly.</p>
<div class="section" id="using-a-3rd-party-toolchain">
<h2>Using a 3rd Party toolchain</h2>
<p>If a toolchain is available for the architecture you plan to build for, then
you can use it as explained in:
<a class="reference internal" href="getting_started.html#third-party-x-compilers"><span class="std std-ref">Using Custom and 3rd Party Cross Compilers</span></a>.</p>
<p>An example of an available 3rd party toolchain is GCC ARM Embedded for the
Cortex-M family of cores.</p>
</div>
<div class="section" id="installing-requirements-and-dependencies">
<span id="mac-requirements"></span><h2>Installing Requirements and Dependencies</h2>
<p>To install the software components required to build the Zephyr kernel on a
Mac, you will need to build a cross compiler for the target devices you wish to
build for and install tools that the build system requires.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Minor version updates of the listed required packages might also
work.</p>
</div>
<p>Before proceeding with the build, ensure your OS is up to date.</p>
<p>First, install the <strong class="program">Homebrew</strong> (The missing package manager for
OS X). Homebrew is a free and open-source software package management system
that simplifies the installation of software on Apple&#8217;s OS X operating
system.</p>
<p>To install <strong class="program">Homebrew</strong>, visit the <a class="reference external" href="http://brew.sh/">Homebrew site</a> and follow the
installation instructions on the site.</p>
<p>To complete the Homebrew installation, you might be prompted to install some
missing dependency. If so, follow please follow the instructions provided.</p>
<p>After Homebrew was successfully installed, install the following tools using
the brew command line.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> brew install gettext qemu help2man mpfr gmp coreutils wget python3

<span class="gp">$</span> brew tap homebrew/dupes

<span class="gp">$</span> brew install grep --with-default-names

<span class="gp">$</span> pip3 install ply
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> brew install crosstool-ng
</pre></div>
</div>
<p>Alternatively you can install the latest version of <strong class="program">crosstool-ng</strong>
from source. Download the latest version from the <a class="reference external" href="http://crosstool-ng.org">crosstool-ng site</a>. The
latest version usually supports the latest released compilers.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> wget
<span class="go">http://crosstool-ng.org/download/crosstool-ng/crosstool-ng-1.22.0.tar.bz2</span>

<span class="gp">$</span> tar xvf crosstool-ng-1.22.0.tar.bz2

<span class="gp">$</span> <span class="nb">cd</span> crosstool-ng/

<span class="gp">$</span> ./configure

<span class="gp">$</span> make

<span class="gp">$</span> make install
</pre></div>
</div>
</div>
<div class="section" id="setting-up-the-toolchain">
<span id="setting-up-mac-toolchain"></span><h2>Setting Up the Toolchain</h2>
<div class="section" id="creating-a-case-sensitive-file-system">
<h3>Creating a Case-sensitive File System</h3>
<p>Building the compiler requires a case-senstive file system. Therefore, use
<strong class="program">diskutil</strong> to create an 8 GB blank sparse image making sure you select
case-sensitive file system (OS X Extended (Case-sensitive, Journaled) and
mount it.</p>
<p>Alternatively you can use the script below to create the image:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nv">ImageName</span><span class="o">=</span>CrossToolNG <span class="nv">ImageNameExt</span><span class="o">=</span><span class="si">${</span><span class="nv">ImageName</span><span class="si">}</span>.sparseimage
diskutil umount force /Volumes/<span class="si">${</span><span class="nv">ImageName</span><span class="si">}</span> <span class="o">&amp;&amp;</span> <span class="nb">true</span>
rm -f <span class="si">${</span><span class="nv">ImageNameExt</span><span class="si">}</span> <span class="o">&amp;&amp;</span> <span class="nb">true</span>
hdiutil create <span class="si">${</span><span class="nv">ImageName</span><span class="si">}</span> -volname <span class="si">${</span><span class="nv">ImageName</span><span class="si">}</span> -type SPARSE -size 8g -fs HFSX
hdiutil mount <span class="si">${</span><span class="nv">ImageNameExt</span><span class="si">}</span>
<span class="nb">cd</span> /Volumes/<span class="nv">$ImageName</span>
</pre></div>
</div>
<p>When mounted, the file system of the image will be available under
<code class="file docutils literal"><span class="pre">/Volumes</span></code>. Change to the mounted directory:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> /Volumes/CrossToolNG

<span class="gp">$</span> mkdir build

<span class="gp">$</span> <span class="nb">cd</span> build
</pre></div>
</div>
</div>
<div class="section" id="setting-the-toolchain-options">
<h3>Setting the Toolchain Options</h3>
<p>In the Zephyr kernel source tree we provide two configurations for
both ARM and X86 that can be used to pre-select the options needed
for building the toolchain.
The configuration files can be found in <code class="file docutils literal"><span class="pre">$</span><em><span class="pre">ZEPHYR_BASE</span></em><span class="pre">/scripts/cross_compiler/</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cp <span class="si">${</span><span class="nv">ZEPHYR_BASE</span><span class="si">}</span>/scripts/cross_compiler/x86.config .config
</pre></div>
</div>
<p>You can create a toolchain configuration or customize an existing configuration
yourself using the configuration menus:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ct-ng menuconfig
</pre></div>
</div>
</div>
<div class="section" id="verifying-the-configuration-of-the-toolchain">
<h3>Verifying the Configuration of the Toolchain</h3>
<p>Before building the toolchain it is advisable to perform a quick verification
of the configuration set for the toolchain.</p>
<ol class="arabic simple">
<li>Open the generated <code class="file docutils literal"><span class="pre">.config</span></code> file.</li>
<li>Verify the following lines are present, assuming the sparse image was
mounted under <code class="file docutils literal"><span class="pre">/Volumes/CrossToolNG</span></code>:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>...
<span class="nv">CT_LOCAL_TARBALLS_DIR</span><span class="o">=</span><span class="s2">&quot;/Volumes/CrossToolNG/src&quot;</span>
<span class="c1"># CT_SAVE_TARBALLS is not set</span>
<span class="nv">CT_WORK_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CT_TOP_DIR</span><span class="si">}</span><span class="s2">/.build&quot;</span>
<span class="nv">CT_PREFIX_DIR</span><span class="o">=</span><span class="s2">&quot;/Volumes/CrossToolNG/x-tools/</span><span class="si">${</span><span class="nv">CT_TARGET</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">CT_INSTALL_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CT_PREFIX_DIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># Following options prevent link errors</span>
<span class="nv">CT_WANTS_STATIC_LINK</span><span class="o">=</span>n
<span class="nv">CT_CC_STATIC_LIBSTDCXX</span><span class="o">=</span>n
...
</pre></div>
</div>
</div>
<div class="section" id="building-the-toolchain">
<h3>Building the Toolchain</h3>
<p>To build the toolchain, enter:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ct-ng build
</pre></div>
</div>
<p>The above process takes a while. When finished, the toolchain will be available
under <code class="file docutils literal"><span class="pre">/Volumes/CrossToolNG/x-tools</span></code>.</p>
<p>Repeat the step for all architectures you want to support in your environment.</p>
<p>To use the toolchain with Zephyr, export the following environment variables
and use the target location where the toolchain was installed, type:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> <span class="nv">ZEPHYR_GCC_VARIANT</span><span class="o">=</span>xtools

<span class="gp">$</span> <span class="nb">export</span> <span class="nv">XTOOLS_TOOLCHAIN_PATH</span><span class="o">=</span>/Volumes/CrossToolNG/x-tools
</pre></div>
</div>
<p>To use the same toolchain in new sessions in the future you can set the
variables in the file <code class="file docutils literal"><span class="pre">$</span><em><span class="pre">HOME</span></em><span class="pre">/.zephyrrc</span></code>, for example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cat &lt;&lt;EOF &gt; ~/.zephyrrc
<span class="go">export XTOOLS_TOOLCHAIN_PATH=/Volumes/CrossToolNG/x-tools</span>
<span class="go">export ZEPHYR_GCC_VARIANT=xtools</span>
<span class="go">EOF</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation_win.html" class="btn btn-neutral float-right" title="Development Environment Setup on Windows" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation_linux.html" class="btn btn-neutral" title="Development Environment Setup on Linux" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Intel Corporation, Wind River Systems, Inc.
      Last updated on Jan 26, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.6.99',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>