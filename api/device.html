

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Device Driver Interface &mdash; Zephyr Project Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Zephyr Project Documentation" href="../index.html"/>
        <link rel="up" title="API Documentation" href="api.html"/>
        <link rel="next" title="Input / Output Driver APIs" href="io_interfaces.html"/>
        <link rel="prev" title="Kernel APIs" href="kernel_api.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Zephyr Project
          

          
          </a>

          
            
            
              <div class="version">
                1.6.99
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introducing_zephyr.html">Introducing Zephyr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../boards/boards.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel/kernel.html">Zephyr Kernel Primer (version 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../application/application.html">Application Development Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting/porting.html">Porting Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/drivers.html">Device Drivers and Device Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subsystems/subsystems.html">Subsystems</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="kernel_api.html">Kernel APIs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Device Driver Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Device Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth.html">Bluetooth API</a></li>
<li class="toctree-l2"><a class="reference internal" href="io_interfaces.html">Input / Output Driver APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="power_management_api.html">Power Management APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_system.html">File System APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../samples/samples.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/kconfig/index.html">Configuration Options Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/code.html">Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSING.html">Licensing of Zephyr Project components</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Zephyr Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="api.html">API Documentation</a> &raquo;</li>
      
    <li>Device Driver Interface</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/device.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="device-driver-interface">
<span id="device-model"></span><h1>Device Driver Interface</h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id2">Device Model</a></li>
</ul>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#contents">Device Model</a></h2>
<dl class="member">
<dt id="_CPPv219_INIT_LEVEL_PRIMARY">
<span id="_INIT_LEVEL_PRIMARY__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1gaecc59013248a06518d64a6d9ce32edc6"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_PRIMARY</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv221_INIT_LEVEL_SECONDARY">
<span id="_INIT_LEVEL_SECONDARY__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga7fe3412216976325cd70f805ee42f337"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_SECONDARY</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv222_INIT_LEVEL_NANOKERNEL">
<span id="_INIT_LEVEL_NANOKERNEL__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga9299e4da4d68dd4efe661a2ad8922e36"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_NANOKERNEL</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv223_INIT_LEVEL_MICROKERNEL">
<span id="_INIT_LEVEL_MICROKERNEL__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1gaf6a57f67e9df71266d5d2157116d71b9"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_MICROKERNEL</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv224_INIT_LEVEL_PRE_KERNEL_1">
<span id="_INIT_LEVEL_PRE_KERNEL_1__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga0ec39d1289e7e8bda542a498fc6ce5d2"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_PRE_KERNEL_1</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv224_INIT_LEVEL_PRE_KERNEL_2">
<span id="_INIT_LEVEL_PRE_KERNEL_2__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga065d345d35a9bd9df8144094ce45fb6a"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_PRE_KERNEL_2</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv223_INIT_LEVEL_POST_KERNEL">
<span id="_INIT_LEVEL_POST_KERNEL__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga3d3f456d27225a6b73cc2af2b27db1ac"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_POST_KERNEL</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv223_INIT_LEVEL_APPLICATION">
<span id="_INIT_LEVEL_APPLICATION__iC"></span><span class="target" id="Zephyrde/daf/group__device__model_1gacccbb5ddb0e244d4ff51adbf71dd1030"></span><em class="property">const</em> int <code class="descclassname"></code><code class="descname">_INIT_LEVEL_APPLICATION</code> = 1<br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv217device_pm_ops_nop">
<span id="device_pm_ops_nop__device_pm_ops"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga7559670280545c7cf8bf752eb0787f27"></span><em class="property">struct</em> <a class="reference internal" href="power_management_api.html#_CPPv213device_pm_ops" title="device_pm_ops">device_pm_ops</a> <code class="descclassname"></code><code class="descname">device_pm_ops_nop</code><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv227_sys_device_do_config_leveli">
<span id="_sys_device_do_config_level__i"></span><span class="target" id="Zephyrde/daf/group__device__model_1gabd8359924cd76dd4e791e3d55be44e83"></span>void <code class="descclassname"></code><code class="descname">_sys_device_do_config_level</code><span class="sig-paren">(</span>int <em>level</em><span class="sig-paren">)</span><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv218device_get_bindingPKc">
<span id="device_get_binding__cCP"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga48c624e18076c7658362c6b763c2bf5e"></span><em class="property">struct</em> <a class="reference internal" href="#_CPPv26device" title="device">device</a> *<code class="descclassname"></code><code class="descname">device_get_binding</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>name</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Retrieve the device structure for a driver by name. </p>
<p>Device objects are created via the DEVICE_INIT() macro and placed in memory by the linker. If a driver needs to bind to another driver it can use this function to retrieve the device structure of the lower level driver by the name the driver exposes to the system.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>pointer to device structure; NULL if not found or cannot be used. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: device name to search for.</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv221device_sync_call_initP18device_sync_call_t">
<span id="device_sync_call_init__device_sync_call_tP"></span><span class="target" id="Zephyrde/daf/group__device__model_1gac731dc0979cb5a5fc5f3d6d3aef4e4bb"></span><em class="property">static</em> void <code class="descclassname"></code><code class="descname">device_sync_call_init</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv218device_sync_call_t" title="device_sync_call_t">device_sync_call_t</a> *<em>sync</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Initialize the context-dependent synchronization data. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">sync</span></code>: A pointer to a valid <a class="reference internal" href="#Zephyrdf/d9d/structdevice__sync__call__t"><span class="std std-ref">device_sync_call_t</span></a> </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv221device_sync_call_waitP18device_sync_call_t">
<span id="device_sync_call_wait__device_sync_call_tP"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga85c06135f7b967f00571a1881c06fd50"></span><em class="property">static</em> void <code class="descclassname"></code><code class="descname">device_sync_call_wait</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv218device_sync_call_t" title="device_sync_call_t">device_sync_call_t</a> *<em>sync</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Wait for the isr to complete the synchronous call Note: It will simply wait on the internal semaphore. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">sync</span></code>: A pointer to a valid <a class="reference internal" href="#Zephyrdf/d9d/structdevice__sync__call__t"><span class="std std-ref">device_sync_call_t</span></a> </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv225device_sync_call_completeP18device_sync_call_t">
<span id="device_sync_call_complete__device_sync_call_tP"></span><span class="target" id="Zephyrde/daf/group__device__model_1ga65a560782cd986aa96abe2804287a43f"></span><em class="property">static</em> void <code class="descclassname"></code><code class="descname">device_sync_call_complete</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv218device_sync_call_t" title="device_sync_call_t">device_sync_call_t</a> *<em>sync</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Signal the waiter about synchronization completion Note: It will simply release the internal semaphore. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">sync</span></code>: A pointer to a valid <a class="reference internal" href="#Zephyrdf/d9d/structdevice__sync__call__t"><span class="std std-ref">device_sync_call_t</span></a> </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c._DEPRECATION_CHECK">
<span class="target" id="Zephyrde/daf/group__device__model_1ga3e241a2ee17ef86c48024c31330d0a14"></span><code class="descname">_DEPRECATION_CHECK</code><span class="sig-paren">(</span>dev_name, level<span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DEVICE_INIT">
<span class="target" id="Zephyrde/daf/group__device__model_1gaa2098e246a5b87de7dad24b4c18a277b"></span><code class="descname">DEVICE_INIT</code><span class="sig-paren">(</span>dev_name, drv_name, init_fn, data, cfg_info, level, prio<span class="sig-paren">)</span></dt>
<dd><p>Create device object and set it up for boot time initialization. </p>
<p>This macro defines a device object that is automatically configured by the kernel during system initialization.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev_name</span></code>: Device name.</li>
<li><code class="docutils literal"><span class="pre">drv_name</span></code>: The name this instance of the driver exposes to the system.</li>
<li><code class="docutils literal"><span class="pre">init_fn</span></code>: Address to the init function of the driver.</li>
<li><code class="docutils literal"><span class="pre">data</span></code>: Pointer to the device&#8217;s configuration data.</li>
<li><code class="docutils literal"><span class="pre">cfg_info</span></code>: The address to the structure containing the configuration information for this instance of the driver.</li>
<li><code class="docutils literal"><span class="pre">level</span></code>: The initialization level at which configuration occurs. Must be one of the following symbols, which are listed in the order they are performed by the kernel: <ul>
<li>PRE_KERNEL_1: Used for devices that have no dependencies, such as those that rely solely on hardware present in the processor/SOC. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>PRE_KERNEL_2: Used for devices that rely on the initialization of devices initialized as part of the PRIMARY level. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>POST_KERNEL: Used for devices that require kernel services during configuration. </li>
<li>APPLICATION: Used for application components (i.e. non-kernel components) that need automatic configuration. These devices can use all services provided by the kernel during configuration.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">prio</span></code>: The initialization priority of the device, relative to other devices of the same initialization level. Specified as an integer value in the range 0 to 99; lower values indicate earlier initialization. Must be a decimal integer literal without leading zeroes or sign (e.g. 32), or an equivalent symbolic name (e.g. #define MY_INIT_PRIO 32); symbolic expressions are <em>not</em> permitted (e.g. CONFIG_KERNEL_INIT_PRIORITY_DEFAULT + 5). </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_AND_API_INIT">
<span class="target" id="Zephyrde/daf/group__device__model_1ga0c690e5f2df6c2b92e822d970541fd3a"></span><code class="descname">DEVICE_AND_API_INIT</code><span class="sig-paren">(</span>dev_name, drv_name, init_fn, data, cfg_info, level, prio, api<span class="sig-paren">)</span></dt>
<dd><p>Create device object and set it up for boot time initialization, with the option to set driver_api. </p>
<p>This macro defines a device object that is automatically configured by the kernel during system initialization.</p>
<p>
The driver api is also set here, eliminating the need to do that during initialization. <dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev_name</span></code>: Device name.</li>
<li><code class="docutils literal"><span class="pre">drv_name</span></code>: The name this instance of the driver exposes to the system.</li>
<li><code class="docutils literal"><span class="pre">init_fn</span></code>: Address to the init function of the driver.</li>
<li><code class="docutils literal"><span class="pre">data</span></code>: Pointer to the device&#8217;s configuration data.</li>
<li><code class="docutils literal"><span class="pre">cfg_info</span></code>: The address to the structure containing the configuration information for this instance of the driver.</li>
<li><code class="docutils literal"><span class="pre">level</span></code>: The initialization level at which configuration occurs. Must be one of the following symbols, which are listed in the order they are performed by the kernel: <ul>
<li>PRE_KERNEL_1: Used for devices that have no dependencies, such as those that rely solely on hardware present in the processor/SOC. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>PRE_KERNEL_2: Used for devices that rely on the initialization of devices initialized as part of the PRIMARY level. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>POST_KERNEL: Used for devices that require kernel services during configuration. </li>
<li>APPLICATION: Used for application components (i.e. non-kernel components) that need automatic configuration. These devices can use all services provided by the kernel during configuration.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">prio</span></code>: The initialization priority of the device, relative to other devices of the same initialization level. Specified as an integer value in the range 0 to 99; lower values indicate earlier initialization. Must be a decimal integer literal without leading zeroes or sign (e.g. 32), or an equivalent symbolic name (e.g. #define MY_INIT_PRIO 32); symbolic expressions are <em>not</em> permitted (e.g. CONFIG_KERNEL_INIT_PRIORITY_DEFAULT + 5). </li>
<li><code class="docutils literal"><span class="pre">api</span></code>: Provides an initial pointer to the API function struct used by the driver. Can be NULL.</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_INIT_PM">
<span class="target" id="Zephyrde/daf/group__device__model_1ga5b68fec34138d422e9b582b77ccd31f4"></span><code class="descname">DEVICE_INIT_PM</code><span class="sig-paren">(</span>dev_name, drv_name, init_fn, device_pm_ops, data, cfg_info, level, prio<span class="sig-paren">)</span></dt>
<dd><p>Create device object and set it up for boot time initialization, with the option to <a class="reference internal" href="power_management_api.html#Zephyrd2/d6e/structdevice__pm__ops"><span class="std std-ref">device_pm_ops</span></a>. </p>
<p>
This macro defines a device object that is automatically configured by the kernel during system initialization.<dl class="docutils">
<dt><strong>Warning</strong></dt>
<dd>This macro is deprecated and will be removed in a future version, superseded by DEVICE_DEFINE.</dd>
</dl>
</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev_name</span></code>: Device name.</li>
<li><code class="docutils literal"><span class="pre">drv_name</span></code>: The name this instance of the driver exposes to the system.</li>
<li><code class="docutils literal"><span class="pre">init_fn</span></code>: Address to the init function of the driver.</li>
<li><code class="docutils literal"><span class="pre">data</span></code>: Pointer to the device&#8217;s configuration data.</li>
<li><code class="docutils literal"><span class="pre">cfg_info</span></code>: The address to the structure containing the configuration information for this instance of the driver.</li>
<li><code class="docutils literal"><span class="pre">level</span></code>: The initialization level at which configuration occurs. Must be one of the following symbols, which are listed in the order they are performed by the kernel: <ul>
<li>PRE_KERNEL_1: Used for devices that have no dependencies, such as those that rely solely on hardware present in the processor/SOC. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>PRE_KERNEL_2: Used for devices that rely on the initialization of devices initialized as part of the PRIMARY level. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>POST_KERNEL: Used for devices that require kernel services during configuration. </li>
<li>APPLICATION: Used for application components (i.e. non-kernel components) that need automatic configuration. These devices can use all services provided by the kernel during configuration.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">prio</span></code>: The initialization priority of the device, relative to other devices of the same initialization level. Specified as an integer value in the range 0 to 99; lower values indicate earlier initialization. Must be a decimal integer literal without leading zeroes or sign (e.g. 32), or an equivalent symbolic name (e.g. #define MY_INIT_PRIO 32); symbolic expressions are <em>not</em> permitted (e.g. CONFIG_KERNEL_INIT_PRIORITY_DEFAULT + 5). </li>
<li><code class="docutils literal"><a class="reference internal" href="power_management_api.html#Zephyrd2/d6e/structdevice__pm__ops"><span class="std std-ref"><span class="pre">device_pm_ops</span></span></a></code>: Address to the <a class="reference internal" href="power_management_api.html#Zephyrd2/d6e/structdevice__pm__ops"><span class="std std-ref">device_pm_ops</span></a> structure of the driver. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_AND_API_INIT_PM">
<span class="target" id="Zephyrde/daf/group__device__model_1gaad61af6c3496ab12d4913f4c5209b996"></span><code class="descname">DEVICE_AND_API_INIT_PM</code><span class="sig-paren">(</span>dev_name, drv_name, init_fn, device_pm_ops, data, cfg_info, level, prio, api<span class="sig-paren">)</span></dt>
<dd><p>Create device object and set it up for boot time initialization, with the options to set driver_api and <a class="reference internal" href="power_management_api.html#Zephyrd2/d6e/structdevice__pm__ops"><span class="std std-ref">device_pm_ops</span></a>. </p>
<p>
This macro defines a device object that is automatically configured by the kernel during system initialization.<dl class="docutils">
<dt><strong>Warning</strong></dt>
<dd>This macro is deprecated and will be removed in a future version, superseded by DEVICE_DEFINE.</dd>
<dt><strong>Warning</strong></dt>
<dd>This macro is deprecated and will be removed in a future version, superseded by DEVICE_DEFINE.</dd>
</dl>
</p>
<p>
The driver api is also set here, eliminating the need to do that during initialization. <dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev_name</span></code>: Device name.</li>
<li><code class="docutils literal"><span class="pre">drv_name</span></code>: The name this instance of the driver exposes to the system.</li>
<li><code class="docutils literal"><span class="pre">init_fn</span></code>: Address to the init function of the driver.</li>
<li><code class="docutils literal"><span class="pre">data</span></code>: Pointer to the device&#8217;s configuration data.</li>
<li><code class="docutils literal"><span class="pre">cfg_info</span></code>: The address to the structure containing the configuration information for this instance of the driver.</li>
<li><code class="docutils literal"><span class="pre">level</span></code>: The initialization level at which configuration occurs. Must be one of the following symbols, which are listed in the order they are performed by the kernel: <ul>
<li>PRE_KERNEL_1: Used for devices that have no dependencies, such as those that rely solely on hardware present in the processor/SOC. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>PRE_KERNEL_2: Used for devices that rely on the initialization of devices initialized as part of the PRIMARY level. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>POST_KERNEL: Used for devices that require kernel services during configuration. </li>
<li>APPLICATION: Used for application components (i.e. non-kernel components) that need automatic configuration. These devices can use all services provided by the kernel during configuration.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">prio</span></code>: The initialization priority of the device, relative to other devices of the same initialization level. Specified as an integer value in the range 0 to 99; lower values indicate earlier initialization. Must be a decimal integer literal without leading zeroes or sign (e.g. 32), or an equivalent symbolic name (e.g. #define MY_INIT_PRIO 32); symbolic expressions are <em>not</em> permitted (e.g. CONFIG_KERNEL_INIT_PRIORITY_DEFAULT + 5). </li>
<li><code class="docutils literal"><a class="reference internal" href="power_management_api.html#Zephyrd2/d6e/structdevice__pm__ops"><span class="std std-ref"><span class="pre">device_pm_ops</span></span></a></code>: Address to the <a class="reference internal" href="power_management_api.html#Zephyrd2/d6e/structdevice__pm__ops"><span class="std std-ref">device_pm_ops</span></a> structure of the driver. </li>
<li><code class="docutils literal"><span class="pre">api</span></code>: Provides an initial pointer to the API function struct used by the driver. Can be NULL.</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_DEFINE">
<span class="target" id="Zephyrde/daf/group__device__model_1ga54e402d1649f9131c5b1046c58c7f92e"></span><code class="descname">DEVICE_DEFINE</code><span class="sig-paren">(</span>dev_name, drv_name, init_fn, pm_control_fn, data, cfg_info, level, prio, api<span class="sig-paren">)</span></dt>
<dd><p>Create device object and set it up for boot time initialization, with the option to device_pm_control. </p>
<p>This macro defines a device object that is automatically configured by the kernel during system initialization.</p>
<p>
The driver api is also set here, eliminating the need to do that during initialization. <dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev_name</span></code>: Device name.</li>
<li><code class="docutils literal"><span class="pre">drv_name</span></code>: The name this instance of the driver exposes to the system.</li>
<li><code class="docutils literal"><span class="pre">init_fn</span></code>: Address to the init function of the driver.</li>
<li><code class="docutils literal"><span class="pre">data</span></code>: Pointer to the device&#8217;s configuration data.</li>
<li><code class="docutils literal"><span class="pre">cfg_info</span></code>: The address to the structure containing the configuration information for this instance of the driver.</li>
<li><code class="docutils literal"><span class="pre">level</span></code>: The initialization level at which configuration occurs. Must be one of the following symbols, which are listed in the order they are performed by the kernel: <ul>
<li>PRE_KERNEL_1: Used for devices that have no dependencies, such as those that rely solely on hardware present in the processor/SOC. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>PRE_KERNEL_2: Used for devices that rely on the initialization of devices initialized as part of the PRIMARY level. These devices cannot use any kernel services during configuration, since they are not yet available. </li>
<li>POST_KERNEL: Used for devices that require kernel services during configuration. </li>
<li>APPLICATION: Used for application components (i.e. non-kernel components) that need automatic configuration. These devices can use all services provided by the kernel during configuration.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">prio</span></code>: The initialization priority of the device, relative to other devices of the same initialization level. Specified as an integer value in the range 0 to 99; lower values indicate earlier initialization. Must be a decimal integer literal without leading zeroes or sign (e.g. 32), or an equivalent symbolic name (e.g. #define MY_INIT_PRIO 32); symbolic expressions are <em>not</em> permitted (e.g. CONFIG_KERNEL_INIT_PRIORITY_DEFAULT + 5). </li>
<li><code class="docutils literal"><span class="pre">api</span></code>: Provides an initial pointer to the API function struct used by the driver. Can be NULL.</li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">pm_control_fn</span></code>: Pointer to device_pm_control function. Can be empty function (device_pm_control_nop) if not implemented. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_NAME_GET">
<span class="target" id="Zephyrde/daf/group__device__model_1ga51d735464c6c80e86ebae96b0b67947b"></span><code class="descname">DEVICE_NAME_GET</code><span class="sig-paren">(</span>name<span class="sig-paren">)</span></dt>
<dd><p>Expands to the full name of a global device object. </p>
<p>Return the full name of a device object symbol created by DEVICE_INIT(), using the dev_name provided to DEVICE_INIT().</p>
<p>It is meant to be used for declaring extern symbols pointing on device objects before using the DEVICE_GET macro to get the device object.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>The exanded name of the device object created by DEVICE_INIT() </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: The same as dev_name provided to DEVICE_INIT()</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_GET">
<span class="target" id="Zephyrde/daf/group__device__model_1ga78e63e230be7dfe525a2de03e503be53"></span><code class="descname">DEVICE_GET</code><span class="sig-paren">(</span>name<span class="sig-paren">)</span></dt>
<dd><p>Obtain a pointer to a device object by name. </p>
<p>Return the address of a device object created by DEVICE_INIT(), using the dev_name provided to DEVICE_INIT().</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>A pointer to the device object created by DEVICE_INIT() </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: The same as dev_name provided to DEVICE_INIT()</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_DECLARE">
<span class="target" id="Zephyrde/daf/group__device__model_1ga5d8d574ffe22938ca58dcb74bf289428"></span><code class="descname">DEVICE_DECLARE</code><span class="sig-paren">(</span>name<span class="sig-paren">)</span></dt>
<dd><p>Declare a device object. </p>
<p>This macro can be used at the top-level to declare a device, such that DEVICE_GET() may be used before the full declaration in DEVICE_INIT(), or reference the device in another C file.</p>
<p>This is often useful when configuring interrupts statically in a device&#8217;s init or per-instance config function, as the init function itself is required by DEVICE_INIT() and use of DEVICE_GET() inside it creates a circular dependeny.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: Device name </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_PM_ACTIVE_STATE">
<span class="target" id="Zephyrde/daf/group__device__model_1gaa7bac39ec3431addfc8fe2190e380c17"></span><code class="descname">DEVICE_PM_ACTIVE_STATE</code></dt>
<dd><p>device is in ACTIVE power state </p>
<p>Normal operation of the device. All device context is retained. </p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_PM_LOW_POWER_STATE">
<span class="target" id="Zephyrde/daf/group__device__model_1gaff2e88fce9e1e12269440a31baa2d781"></span><code class="descname">DEVICE_PM_LOW_POWER_STATE</code></dt>
<dd><p>device is in LOW power state </p>
<p>Device context is preserved by the HW and need not be restored by the driver. </p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_PM_SUSPEND_STATE">
<span class="target" id="Zephyrde/daf/group__device__model_1ga5df77dab681988d5afa1b209bc8fb80c"></span><code class="descname">DEVICE_PM_SUSPEND_STATE</code></dt>
<dd><p>device is in SUSPEND power state </p>
<p>Most device context is lost by the hardware. Device drivers must save and restore or reinitialize any context lost by the hardware </p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_PM_OFF_STATE">
<span class="target" id="Zephyrde/daf/group__device__model_1gacfc68305e69a045657384d430e49681c"></span><code class="descname">DEVICE_PM_OFF_STATE</code></dt>
<dd><p>device is in OFF power state </p>
<p><ul class="simple">
<li>Power has been fully removed from the device. The device context is lost when this state is entered, so the OS software will reinitialize the device when powering it back on </li>
</ul>
</p>
</dd></dl>

<dl class="macro">
<dt id="c.DEVICE_PM_SET_POWER_STATE">
<span class="target" id="Zephyrde/daf/group__device__model_1gac95cd44908f9b9f5a8912ecb41b51d47"></span><code class="descname">DEVICE_PM_SET_POWER_STATE</code></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DEVICE_PM_GET_POWER_STATE">
<span class="target" id="Zephyrde/daf/group__device__model_1ga97068303f8e1087ce8ea735a13806768"></span><code class="descname">DEVICE_PM_GET_POWER_STATE</code></dt>
<dd></dd></dl>

<dl class="class">
<dt id="_CPPv213device_config">
<span id="device_config"></span><span class="target" id="Zephyrd2/dd8/structdevice__config"></span><em class="property">struct </em><code class="descclassname"></code><code class="descname">device_config</code><br /></dt>
<dd><em>#include &lt;device.h&gt;</em><p>Static device information (In ROM) Per driver instance. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This struct contains deprecated struct (<a class="reference internal" href="power_management_api.html#Zephyrd2/d6e/structdevice__pm__ops"><span class="std std-ref">device_pm_ops</span></a>) that will be removed in a future version.</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">name</span></code>: name of the device </li>
<li><code class="docutils literal"><span class="pre">init</span></code>: init function for the driver </li>
<li><code class="docutils literal"><span class="pre">config_info</span></code>: address of driver instance config information </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv26device">
<span id="device"></span><span class="target" id="Zephyrda/d54/structdevice"></span><em class="property">struct </em><code class="descclassname"></code><code class="descname">device</code><br /></dt>
<dd><em>#include &lt;device.h&gt;</em><p>Runtime device structure (In memory) Per driver instance. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><a class="reference internal" href="#Zephyrd2/dd8/structdevice__config"><span class="std std-ref"><span class="pre">device_config</span></span></a></code>: Build time config information </li>
<li><code class="docutils literal"><span class="pre">driver_api</span></code>: pointer to structure containing the API functions for the device type. This pointer is filled in by the driver at init time. </li>
<li><code class="docutils literal"><span class="pre">driver_data</span></code>: driver instance data. For driver use only </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv218device_sync_call_t">
<span id="device_sync_call_t"></span><span class="target" id="Zephyrdf/d9d/structdevice__sync__call__t"></span><em class="property">struct </em><code class="descclassname"></code><code class="descname">device_sync_call_t</code><br /></dt>
<dd><em>#include &lt;device.h&gt;</em><p>Synchronous calls API Specific type for synchronizing calls among the 2 possible contexts </p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="io_interfaces.html" class="btn btn-neutral float-right" title="Input / Output Driver APIs" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kernel_api.html" class="btn btn-neutral" title="Kernel APIs" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Intel Corporation, Wind River Systems, Inc.
      Last updated on Jan 26, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.6.99',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>