

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Arduino/Genuino 101 &mdash; Zephyr Project Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../search.html"/>
    <link rel="top" title="Zephyr Project Documentation" href="../../../../index.html"/>
        <link rel="up" title="Supported Boards" href="../../../boards.html"/>
        <link rel="next" title="X86 Emulation (QEMU)" href="../../qemu_x86/doc/board.html"/>
        <link rel="prev" title="Supported Boards" href="../../../boards.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> Zephyr Project
          

          
          </a>

          
            
            
              <div class="version">
                1.6.99
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/introducing_zephyr.html">Introducing Zephyr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/getting_started.html">Getting Started Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../boards.html">Supported Boards</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../boards.html#x86-boards">X86 Boards</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Arduino/Genuino 101</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware">Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programming-and-debugging">Programming and Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#release-notes">Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../qemu_x86/doc/board.html">X86 Emulation (QEMU)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quark_d2000_crb/doc/quark_d2000_crb.html">Quark D2000 Development Board</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../boards.html#arm-boards">ARM Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../boards.html#arc-boards">ARC Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../boards.html#nios-ii-boards">NIOS II Boards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kernel/kernel.html">Zephyr Kernel Primer (version 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application/application.html">Application Development Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../porting/porting.html">Porting Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../drivers/drivers.html">Device Drivers and Device Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../subsystems/subsystems.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples/samples.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/kconfig/index.html">Configuration Options Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/code.html">Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../LICENSING.html">Licensing of Zephyr Project components</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">Zephyr Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../boards.html">Supported Boards</a> &raquo;</li>
      
    <li>Arduino/Genuino 101</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/boards/x86/arduino_101/doc/board.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arduino-genuino-101">
<span id="arduino-101"></span><h1>Arduino/Genuino 101</h1>
<div class="section" id="overview">
<h2>Overview</h2>
<p>The Arduino/Genuino 101 is a learning and development board which contains an
Intel® Curie™ Module. This board is designed to integrate the core&#8217;s low
power-consumption and high performance with the Arduino&#8217;s ease-of-use. The
Arduino 101 adds Bluetooth Low Energy capabilities and has an on-board 6-axis
accelerometer/gyroscope, providing exciting opportunities for building creative
projects in the connected world.</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../../../../_images/arduino_101.jpg"><img alt="Arduino/Genuino 101" src="../../../../_images/arduino_101.jpg" style="width: 442px;" /></a>
<p class="caption"><span class="caption-text">Arduino/Genuino 101 (Credit: Intel)</span></p>
</div>
<p>The Intel Quark* SE SoC in the Curie module contains a single core 32 MHz x86
(Intel Quark* processor) and the 32 MHz Argonaut RISC Core (ARC)* EM processor.
The two processors operate simultaneously and share memory. The ARC processor is
also referenced as the digital signal processor (DSP) sensor hub or a sensor
subsystem depending on what document you’re looking at. In theory, the DSP can
run using a minimal amount of power, gathering and processing sensor data while
the x86 processor waits in a low power mode, which would be ideal for always-on
applications.</p>
<p>Zephyr can be flashed to an Arduino 101 for experimentation and testing
purposes; keep in mind that running the Zephyr OS on the Arduino 101 is not
supported by Arduino LLC.</p>
</div>
<div class="section" id="hardware">
<h2>Hardware</h2>
<div class="section" id="board-layout">
<h3>Board Layout</h3>
<p>General information for the board can be found at the
<a class="reference external" href="Arduino101">Arduino website</a>, which also includes schematics and BRD files
for the board.</p>
</div>
<div class="section" id="arduino-101-pinout">
<h3>Arduino 101 Pinout</h3>
<p>When using the Zephyr kernel, the pinout mapping for the Arduino 101 becomes a
little more complicated. The table below details which pins in Zephyr map to
those on the Arduino 101 board for control. Full details of the pinmux
implementation, what valid options can be configured, and where things map can
be found in the <code class="file docutils literal"><span class="pre">boards/arduino_101/pinmux.c</span></code> file.</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="29%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Arduino Pin</th>
<th class="head">Function</th>
<th class="head">Zephyr Pin</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IO-0</td>
<td>UART1-RX</td>
<td>17</td>
</tr>
<tr class="row-odd"><td>IO-1</td>
<td>UART1-TX</td>
<td>16</td>
</tr>
<tr class="row-even"><td>IO-2</td>
<td>GPIO</td>
<td>52</td>
</tr>
<tr class="row-odd"><td>IO-3</td>
<td>GPIO</td>
<td>51
63</td>
</tr>
<tr class="row-even"><td>IO-4</td>
<td>GPIO</td>
<td>53</td>
</tr>
<tr class="row-odd"><td>IO-5</td>
<td>GPIO</td>
<td>49
64</td>
</tr>
<tr class="row-even"><td>IO-6</td>
<td>PWM2</td>
<td>65</td>
</tr>
<tr class="row-odd"><td>IO-7</td>
<td>GPIO</td>
<td>54</td>
</tr>
<tr class="row-even"><td>IO-8</td>
<td>GPIO</td>
<td>50</td>
</tr>
<tr class="row-odd"><td>IO-9</td>
<td>PWM3</td>
<td>66</td>
</tr>
<tr class="row-even"><td>IO-10</td>
<td>AIN0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>IO-11</td>
<td>AIN3</td>
<td>3</td>
</tr>
<tr class="row-even"><td>IO-12</td>
<td>AIN1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>IO-13</td>
<td>AIN2</td>
<td>2</td>
</tr>
<tr class="row-even"><td>ADC0</td>
<td>GPIO SS</td>
<td>10</td>
</tr>
<tr class="row-odd"><td>ADC1</td>
<td>GPIO SS</td>
<td>11</td>
</tr>
<tr class="row-even"><td>ADC2</td>
<td>GPIO SS</td>
<td>12</td>
</tr>
<tr class="row-odd"><td>ADC3</td>
<td>GPIO SS</td>
<td>13</td>
</tr>
<tr class="row-even"><td>ADC4</td>
<td>AIN14</td>
<td>14</td>
</tr>
<tr class="row-odd"><td>ADC5</td>
<td>AIN9</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="supported-features">
<h3>Supported Features</h3>
<p>The Zephyr kernel supports multiple hardware features on the Arduino 101 through
the use of drivers. Some drivers are functional on the x86 side only, some on
the ARC side only, and a few are functional on both sides. The table below shows
which drivers and functionality can be found on which architectures:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="21%" />
<col width="9%" />
<col width="9%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Interface</th>
<th class="head">Controller</th>
<th class="head">ARC</th>
<th class="head">x86</th>
<th class="head">Driver/Component</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>APIC</td>
<td>on-chip</td>
<td>N</td>
<td>Y</td>
<td>interrupt_controller</td>
</tr>
<tr class="row-odd"><td>UART</td>
<td>on-chip</td>
<td>N</td>
<td>Y</td>
<td>serial port-polling;
serial port-interrupt</td>
</tr>
<tr class="row-even"><td>SPI</td>
<td>on-chip</td>
<td>Y</td>
<td>Y</td>
<td>spi</td>
</tr>
<tr class="row-odd"><td>ADC</td>
<td>on-chip</td>
<td>Y</td>
<td>N</td>
<td>adc</td>
</tr>
<tr class="row-even"><td>I2C</td>
<td>on-chip</td>
<td>Y</td>
<td>Y</td>
<td>i2c</td>
</tr>
<tr class="row-odd"><td>GPIO</td>
<td>on-chip</td>
<td>Y</td>
<td>Y</td>
<td>gpio</td>
</tr>
<tr class="row-even"><td>PWM</td>
<td>on-chip</td>
<td>Y</td>
<td>Y</td>
<td>pwm</td>
</tr>
<tr class="row-odd"><td>mailbox</td>
<td>on-chip</td>
<td>Y</td>
<td>Y</td>
<td>ipm</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="required-hardware-and-software">
<h3>Required Hardware and Software</h3>
<p>Before flashing the Zephyr kernel onto an Arduino 101, a few additional pieces
of hardware are required.</p>
<ul class="simple">
<li>The USB port for power will work; however, we recommend the 7V-12V barrel
connector be used when working with the JTAG connector.</li>
<li>If you wish to grab any data off the serial port, you will need a TTY-to-USB
adaptor. The following adapters require male-to-male jumper cables in order to
connect to the Arduino 101 board.<ul>
<li>USB to TTL Serial Cable</li>
<li>FTDI USB to TTL Serial Part #TTL-232R-3V3 <a class="reference external" href="http://www.ftdichip.com/Products/Cables/USBTTLSerial.htm">http://www.ftdichip.com/Products/Cables/USBTTLSerial.htm</a></li>
</ul>
</li>
</ul>
<p>We recommend using the <code class="docutils literal"><span class="pre">dfu-util</span></code> to flash the Arduino 101 board. If you&#8217;d
like to flash using JTAG, the following additional hardware is needed:</p>
<ul class="simple">
<li>FlySwatter2 JTAG debugger</li>
<li>ARM Micro JTAG Connector, Model: ARM-JTAG-20-10</li>
</ul>
</div>
<div class="section" id="connecting-serial-output">
<h3>Connecting Serial Output</h3>
<p>The default configuration defined in the Zephyr kernel supports serial output
via the UART0 on the board. To read the output, you will need a USB to TTL
serial cable. To enable serial output:</p>
<ul class="simple">
<li>Connect the Serial Cable RX pin to the Arduino 101&#8217;s TX-&gt;1 pin.</li>
<li>Connect the Serial Cable TX pin to the Arduino 101&#8217;s RX&lt;-0 pin.</li>
<li>Connect the Serial Cable GND pin to the Arduino 101&#8217;s GND pin.</li>
</ul>
<p>Once connected, on your development environment, you will need to:</p>
<ul class="simple">
<li>Open a serial port emulator (i.e. on Linux minicom, screen, etc)</li>
<li>Attach to the USB to TTL Serial cable, for example, on Linux this may be
/dev/ttyUSB0</li>
<li>Set the communication details to:<ul>
<li>Speed: 115200</li>
<li>Data: 8 bits</li>
<li>Parity: None</li>
<li>Stopbits: 1</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="programming-and-debugging">
<h2>Programming and Debugging</h2>
<p>The Arduino 101 is powered by a Quark CPU and a sensor subsystem powered by an
ARC processor. When building applications, depending on the usage, two Zephyr
images need to be built and flashed.</p>
<p>The Arduino 101 has a bootloader that supports flashing over USB using the DFU
protocol. Additionally, the factory installed bootloader supports flashing of
the firmware for the Bluetooth device of the Curie module.</p>
<p>Use the <code class="docutils literal"><span class="pre">arduino_101</span></code> board definition to build a kernel for the Quark core. Use
the <code class="docutils literal"><span class="pre">arduino_101_sss</span></code> board definition when targeting the sensor subsystem.</p>
<p>When your application is targeting the Quark processor only, it is important to
disable the sensor subsystem processor using the CONFIG_ARC_INIT option.
otherwise the board will appear to hang waiting for the sensor subsystem
processor to boot.</p>
<div class="section" id="bootloader-boot-rom">
<h3>Bootloader (Boot ROM)</h3>
<p>Support for the <a class="reference external" href="https://github.com/quark-mcu/qm-bootloader">QMSI Bootloader</a> has been removed starting from Zephyr 1.4.0.
Thus, the factory boot ROM can be kept supporting the flashing of the board over
DFU and flashing the Bluetooth firmware.</p>
<p>If you have previously installed a different boot ROM it is recommended to
restore the factory boot ROM image using the <a class="reference external" href="https://downloadcenter.intel.com/downloads/eula/25470/Arduino-101-software-package?httpDown=https%3A%2F%2Fdownloadmirror.intel.com%2F25470%2Feng%2Farduino101-factory_recovery-flashpack.tar.bz2">Flashpack Utility</a>. Consult
the README available in the <a class="reference external" href="https://downloadcenter.intel.com/downloads/eula/25470/Arduino-101-software-package?httpDown=https%3A%2F%2Fdownloadmirror.intel.com%2F25470%2Feng%2Farduino101-factory_recovery-flashpack.tar.bz2">Flashpack Utility</a> package and follow the
instructions for your environment.</p>
</div>
<div class="section" id="flashing">
<h3>Flashing</h3>
<p>The <code class="docutils literal"><span class="pre">dfu-util</span></code> flashing application will only recognize the Arduino 101 as a
DFU-capable device within five seconds after the Master Reset is pressed on the
board. Type the <code class="docutils literal"><span class="pre">dfu-util</span></code> command line, press the Master Reset button, and then
quickly press return to execute the dfu-util command. If dfu-util fails saying
&#8220;No DFU capable USB device available&#8221;, try again more quickly after pressing
the master reset button.</p>
<div class="section" id="flashing-the-sensor-subsystem-core">
<h4>Flashing the Sensor Subsystem Core</h4>
<p>When building for the ARC processor, the board type is listed as
<code class="docutils literal"><span class="pre">arduino_101_sss</span></code>.</p>
<p>Change directories to your local checkout copy of Zephyr, and run:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> <span class="nv">$ZEPHYR_BASE</span>/samples/hello_world
<span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101_sss
</pre></div>
</div>
<p>Once the image has been built, flash it with:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> dfu-util -a sensor_core -D outdir/arduino_101_sss/zephyr.bin
</pre></div>
</div>
</div>
<div class="section" id="flashing-the-x86-application-core">
<h4>Flashing the x86 Application Core</h4>
<p>When building for the x86 processor, the board type is listed as
<code class="docutils literal"><span class="pre">arduino_101</span></code>.</p>
<p>Change directories to your local checkout copy of Zephyr, and run:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> <span class="nv">$ZEPHYR_BASE</span>/samples/hello_world
<span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101
</pre></div>
</div>
<p>Verify the Arduino 101 has power.</p>
<p>Once the image has been built, flash it with:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> dfu-util -a x86_app -D outdir/arduino_101/zephyr.bin
</pre></div>
</div>
</div>
<div class="section" id="flashing-the-bluetooth-core">
<h4>Flashing the Bluetooth Core</h4>
<p>To be interoperable with the Zephyr Bluetooth stack the Bluetooth controller of
the Arduino 101 (Nordic Semiconductor nRF51) needs to be flashed with a
compatible firmware.</p>
<p>The Arduino 101 factory-installed firmware on this controller is not supported
by the Zephyr project, so you need to flash a new one onto it.</p>
<p>Luckily, starting with Zephyr 1.6, Zephyr itself is able to act as the firmware
for the controller. The application you need is <code class="docutils literal"><span class="pre">samples/bluetooth/hci_uart</span></code> and
the target board is called <code class="docutils literal"><span class="pre">arduino_101_ble</span></code>.</p>
<p>To build the Bluetooth controller image, follow the instructions below:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> samples/bluetooth/hci_uart
<span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101_ble
</pre></div>
</div>
<p>Flash the binary using USB DFU:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> dfu-util -a ble_core -D outdir/arduino_101_ble/zephyr.bin
</pre></div>
</div>
<p>After successfully completing these steps your Arduino 101 should now have a HCI
compatible BLE firmware.</p>
</div>
<div class="section" id="flashing-using-jtag-adapter">
<h4>Flashing using JTAG Adapter</h4>
<p>We recommend using the <code class="docutils literal"><span class="pre">dfu-util</span></code> tool to flash the Arduino 101 board for typical
development work. JTAG is intended for for advanced development and debugging.</p>
<ul>
<li><p class="first">Connect the ARM Micro JTAG Connector to the FlySwatter2.</p>
</li>
<li><p class="first">Locate the micro JTAG connector on the Arduino 101 board. It is adjacent to the
SCL and SDA pins in the Arduino headers, highlighted as the red square in the
figure below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../../../_images/arduino_101_flat.jpg"><img alt="Arduino/Genuino 101 JTAG" src="../../../../_images/arduino_101_flat.jpg" style="width: 442px;" /></a>
</div>
</li>
<li><p class="first">Beside the micro JTAG header is a small white dot indicating the location of
pin 1 on the header. The orange arrow on the figure points to the dot.</p>
</li>
<li><p class="first">Connect the FlySwatter2 to the Arduino 101 micro JTAG connector.</p>
</li>
</ul>
<p>Ensure that both the cable and header pin 1 locations line up. The cable from
the ARM Micro JTAG connector uses a red wire on the cable to denote which end on
the cable has the pin 1.</p>
<p>For Linux environments, to control the FlySwatter your Linux account needs to be
granted HAL layer interaction permissions. This is done through the group
&#8216;plugdev&#8217;. Verifying the group exists and adding your username can be
accomplished with the usermod command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo usermod -a -G plugdev <span class="nv">$USERNAME</span>
</pre></div>
</div>
<p>If the group does not exist, you can add it by running the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo groupadd -r plugdev
</pre></div>
</div>
<p>For Linux environments, verify that <code class="docutils literal"><span class="pre">udev</span></code> has the proper rules for giving your
user control of the FlySwatter device. Adding the following rule to udev will
give members of the plugdev group control of the FlySwatter.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> su -
<span class="gp">$</span> cat &lt;&lt;EOF &gt; /etc/udev/rules.d/99-openocd.rules
<span class="gp">#</span> TinCanTools FlySwatter2
<span class="go">ATTRS{idVendor}==&quot;0403&quot;, ATTRS{idProduct}==&quot;6010&quot;, MODE=&quot;664&quot;, GROUP=&quot;plugdev&quot;</span>
<span class="go">EOF</span>
</pre></div>
</div>
<p>Once your udev rules are setup, you will need to reload the rules:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo udevadm control --reload-rules
</pre></div>
</div>
<p>Plug the USB Type B cable into the FlySwatter2 and your computer. On Linux, you
should see something similar to the following in your dmesg:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">usb 1-2.1.1: new high-speed USB device number 13 using xhci_hcd</span>
<span class="go">usb 1-2.1.1: New USB device found, idVendor=0403, idProduct=6010</span>
<span class="go">usb 1-2.1.1: New USB device strings: Mfr=1, Product=2, SerialNumber=3</span>
<span class="go">usb 1-2.1.1: Product: Flyswatter2</span>
<span class="go">usb 1-2.1.1: Manufacturer: TinCanTools</span>
<span class="go">usb 1-2.1.1: SerialNumber: FS20000</span>
<span class="go">ftdi_sio 1-2.1.1:1.0: FTDI USB Serial Device converter detected</span>
<span class="go">usb 1-2.1.1: Detected FT2232H</span>
<span class="go">usb 1-2.1.1: FTDI USB Serial Device converter now attached to ttyUSB0</span>
<span class="go">ftdi_sio 1-2.1.1:1.1: FTDI USB Serial Device converter detected</span>
<span class="go">usb 1-2.1.1: Detected FT2232H</span>
<span class="go">usb 1-2.1.1: FTDI USB Serial Device converter now attached to ttyUSB1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="debugging">
<h3>Debugging</h3>
<p>The instructions below will help you debug the Arduino 101 on the x86 core or
the ARC core, respectively.</p>
<div class="section" id="application-core-x86">
<h4>Application Core (X86)</h4>
<p>Build and flash the x86 application with the following commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> &lt;my x86 app&gt;
<span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101 flash
</pre></div>
</div>
<p>Launch the debug server on the x86 core:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101 debugserver
</pre></div>
</div>
<p>Connect to the debug server at the x86 core from a second console:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> &lt;my x86 app&gt;
<span class="gp">$</span> /opt/zephyr-sdk/sysroots/i686-pokysdk-linux/usr/bin/iamcu-poky-elfiamcu/i586-poky-elfiamcu-gdb outdir/arduino_101/zephyr.elf
<span class="go">(gdb) target remote localhost:3333</span>
<span class="go">(gdb) b main</span>
<span class="go">(gdb) c</span>
</pre></div>
</div>
</div>
<div class="section" id="sensor-subsystem-core-arc">
<h4>Sensor Subsystem Core (ARC)</h4>
<p>Enable ARC INIT from the x86 core. This can be done by flashing an x86 app (like
a simple hello world or dummy app) with CONFIG_ARC_INIT=y.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> samples/hello_world
<span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101 flash
</pre></div>
</div>
<p>Build and flash the ARC app as shown:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> &lt;my arc app&gt;
<span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101_sss flash
</pre></div>
</div>
<p>Launch the debug server on the ARC core:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make <span class="nv">BOARD</span><span class="o">=</span>arduino_101_sss debugserver
</pre></div>
</div>
<p>Connect to the debugserver at ARC from a second console:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> &lt;my arc app&gt;
<span class="gp">$</span> /opt/zephyr-sdk/sysroots/i686-pokysdk-linux/usr/bin/arc-poky-elf/arc-poky-elf-gdb outdir/arduino_101_sss/zephyr.elf
<span class="go">(gdb) target remote localhost:3334</span>
<span class="go">(gdb) b main</span>
<span class="go">(gdb) c</span>
</pre></div>
</div>
</div>
<div class="section" id="bluetooth-firmware">
<h4>Bluetooth Firmware</h4>
<p>You will only see normal log messages on the console, by default, without any
way of accessing the HCI traffic between Zephyr and the nRF51 controller.
However, there is a special Bluetooth logging mode that converts the console to
use a binary protocol that interleaves both normal log messages as well as the
HCI traffic. Set the following Kconfig options to enable this protocol before
building your application:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">CONFIG_BLUETOOTH_DEBUG_MONITOR=y</span>
<span class="go">CONFIG_UART_CONSOLE=n</span>
<span class="go">CONFIG_UART_QMSI_1_BAUDRATE=1000000</span>
</pre></div>
</div>
<p>The first item replaces the BLUETOOTH_DEBUG_STDOUT option, the second one
disables the default printk/printf hooks, and the third one matches the console
baudrate with what&#8217;s used to communicate with the nRF51, in order not to create
a bottle neck.</p>
<p>To decode the binary protocol that will now be sent to the console UART you need
to use the btmon tool from BlueZ 5.40 or later:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> btmon --tty &lt;console TTY&gt; --tty-speed 1000000
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="release-notes">
<h2>Release Notes</h2>
<p>When debugging on ARC, it is important that the x86 core be started and running
BEFORE attempting to debug on ARC. This is because the IPM console calls will
hang waiting for the x86 core to clear the communication.</p>
</div>
<div class="section" id="references">
<h2>References</h2>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../qemu_x86/doc/board.html" class="btn btn-neutral float-right" title="X86 Emulation (QEMU)" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../../boards.html" class="btn btn-neutral" title="Supported Boards" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Intel Corporation, Wind River Systems, Inc.
      Last updated on Jan 26, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.6.99',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>