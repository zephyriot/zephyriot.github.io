

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Arduino Due &mdash; Zephyr Project Documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../search.html"/>
    <link rel="top" title="Zephyr Project Documentation" href="../../../../index.html"/>
        <link rel="up" title="Supported Boards" href="../../../boards.html"/>
        <link rel="next" title="CC3200 LaunchXL" href="../../cc3200_launchxl/doc/cc3200_launchxl.html"/>
        <link rel="prev" title="Arduino/Genuino 101 (BLE)" href="../../arduino_101_ble/doc/board.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> Zephyr Project
          

          
          </a>

          
            
            
              <div class="version">
                1.6.99
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/introducing_zephyr.html">Introducing Zephyr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/getting_started.html">Getting Started Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../boards.html">Supported Boards</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../boards.html#x86-boards">X86 Boards</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../boards.html#arm-boards">ARM Boards</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../arduino_101_ble/doc/board.html">Arduino/Genuino 101 (BLE)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Arduino Due</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware">Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programming-and-debugging">Programming and Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cc3200_launchxl/doc/cc3200_launchxl.html">CC3200 LaunchXL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mps2_an385/doc/mps2_an385.html">ARM V2M MPS2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nucleo_f401re/doc/nucleof401re.html">ST Nucleo F401RE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../qemu_cortex_m3/doc/board.html">ARM Cortex-M3 Emulation (QEMU)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../v2m_beetle/doc/v2m_beetle.html">ARM V2M Beetle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../boards.html#arc-boards">ARC Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../boards.html#nios-ii-boards">NIOS II Boards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kernel/kernel.html">Zephyr Kernel Primer (version 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application/application.html">Application Development Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../porting/porting.html">Porting Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../drivers/drivers.html">Device Drivers and Device Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../subsystems/subsystems.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples/samples.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/kconfig/index.html">Configuration Options Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/code.html">Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../LICENSING.html">Licensing of Zephyr Project components</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">Zephyr Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../boards.html">Supported Boards</a> &raquo;</li>
      
    <li>Arduino Due</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/boards/arm/arduino_due/doc/board.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arduino-due">
<span id="id1"></span><h1>Arduino Due</h1>
<div class="section" id="overview">
<h2>Overview</h2>
<p>The arduino_due board configuration is used by Zephyr applications
that run on the Arduino Due board. It provides support for the Atmel
SAM3X8E ARM Cortex-M3 CPU and the following devices:</p>
<ul class="simple">
<li>Nested Vectored Interrupt Controller (NVIC)</li>
<li>System Tick System Clock (SYSTICK)</li>
<li>Serial Port over USB (ATMEL_SAM3)</li>
</ul>
<p>More information about the board can be found at the <a class="reference external" href="https://www.arduino.cc/en/Main/ArduinoBoardDue">Arduino Due website</a>.
The <a class="reference external" href="http://www.atmel.com/devices/sam3x8e.aspx">Atmel SAM3X8E Datasheet</a> has the information and the datasheet about
the processor.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This configuration is not supported by Arduino.</p>
</div>
</div>
<div class="section" id="hardware">
<h2>Hardware</h2>
<div class="section" id="supported-features">
<h3>Supported Features</h3>
<p>The arduino_due board configuration supports the following hardware features:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="27%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Interface</th>
<th class="head">Controller</th>
<th class="head">Driver/Component</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NVIC</td>
<td>on-chip</td>
<td>nested vectored
interrupt controller</td>
</tr>
<tr class="row-odd"><td>SYSTICK</td>
<td>on-chip</td>
<td>system clock</td>
</tr>
<tr class="row-even"><td>UART</td>
<td>on-chip</td>
<td>serial port</td>
</tr>
<tr class="row-odd"><td>GPIO</td>
<td>on-chip</td>
<td>gpio</td>
</tr>
<tr class="row-even"><td>I2C</td>
<td>on-chip</td>
<td>i2c</td>
</tr>
</tbody>
</table>
<p>Other hardware features are not currently supported by the Zephyr kernel.
See <a class="reference external" href="https://www.arduino.cc/en/Main/ArduinoBoardDue">Arduino Due website</a> and <a class="reference external" href="http://www.atmel.com/devices/sam3x8e.aspx">Atmel SAM3X8E Datasheet</a> for a complete
list of Arduino Due board hardware features.</p>
<p>The default configuration can be found in the Kconfig
<code class="file docutils literal"><span class="pre">boards/arm/arduino_due/arduino_due_defconfig</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For I2C, pull-up resistors are required for using SCL1 and SDA1 (near IO13).</p>
</div>
</div>
<div class="section" id="interrupt-controller">
<h3>Interrupt Controller</h3>
<p>There are 15 fixed exceptions including exceptions 12 (debug monitor) and 15
(SYSTICK) that behave more as interrupts than exceptions. In addition, there can
be a variable number of IRQs. Exceptions 7-10 and 13 are reserved. They don&#8217;t
need handlers.</p>
<p>A Cortex-M3/4-based board uses vectored exceptions. This means each exception
calls a handler directly from the vector table.</p>
<p>Handlers are provided for exceptions 1-6, 11-12, and 14-15.  The table here
identifies the handlers used for each exception.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="21%" />
<col width="28%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Exc#</th>
<th class="head">Name</th>
<th class="head">Remarks</th>
<th class="head">Used by Zephyr Kernel</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>Reset</td>
<td>&nbsp;</td>
<td>system initialization</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>NMI</td>
<td>&nbsp;</td>
<td>system fatal error</td>
</tr>
<tr class="row-even"><td>3</td>
<td>Hard fault</td>
<td>&nbsp;</td>
<td>system fatal error</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>MemManage</td>
<td>MPU fault</td>
<td>system fatal error</td>
</tr>
<tr class="row-even"><td>5</td>
<td>Bus</td>
<td>&nbsp;</td>
<td>system fatal error</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>Usage
fault</td>
<td>undefined
instruction,
or switch
attempt to ARM
mode</td>
<td>system fatal error</td>
</tr>
<tr class="row-even"><td>11</td>
<td>SVC</td>
<td>&nbsp;</td>
<td>context switch and
software interrupts</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>Debug
monitor</td>
<td>&nbsp;</td>
<td>system fatal error</td>
</tr>
<tr class="row-even"><td>14</td>
<td>PendSV</td>
<td>&nbsp;</td>
<td>context switch</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>SYSTICK</td>
<td>&nbsp;</td>
<td>system clock</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After a reset, all exceptions have a priority of 0. Interrupts cannot run
at priority 0 for the interrupt locking mechanism and exception handling
to function properly.</p>
</div>
</div>
<div class="section" id="system-clock">
<h3>System Clock</h3>
<p>Arduino Due has two external oscillators/resonators. The slow clock is
32.768 kHz, and the main clock is 12 MHz. The processor can set up PLL to drive
the master clock, which can be set as high as 84 MHz.</p>
</div>
<div class="section" id="serial-port">
<h3>Serial Port</h3>
<p>The Atmel SAM3X8E processor has a single UART that is used by the SAM-BA
bootloader. This UART has only two wires for RX/TX and does not have flow
control (CTS/RTS) or FIFO. The RX/TX pins are connected to the ATmega16U2,
which provides USB-to-TTL serial function. The Zephyr console output, by
default, is utilizing this controller.</p>
</div>
</div>
<div class="section" id="programming-and-debugging">
<h2>Programming and Debugging</h2>
<div class="section" id="flashing">
<h3>Flashing</h3>
<div class="section" id="bossa-tool">
<h4>BOSSA Tool</h4>
<p>Flashing the Zephyr kernel onto Arduino Due requires the <a class="reference external" href="https://github.com/shumatech/BOSSA">bossa tool</a>.</p>
<p>There are GUI and command line versions of the bossa tool. The following
section provides the steps to build the command line version. Please
refer to the bossa tool&#8217;s README file on how to build the GUI version.</p>
<p>To build the bossa tool, follow these steps:</p>
<ol class="arabic">
<li><p class="first">Checkout the bossa tool&#8217;s code from the repository.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone https://github.com/shumatech/BOSSA.git
<span class="gp">$</span> <span class="nb">cd</span> BOSSA
</pre></div>
</div>
</li>
<li><p class="first">Checkout the arduino branch. The code on the master branch does not
work with Arduino Due.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> git checkout arduino
</pre></div>
</div>
</li>
<li><p class="first">Build the command line version of the bossa tool.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make bin/bossac
</pre></div>
</div>
</li>
<li><p class="first">The resulting binary is available at <code class="file docutils literal"><span class="pre">bin/bossac</span></code>.</p>
</li>
</ol>
</div>
<div class="section" id="flashing-an-application-to-arduino-due">
<h4>Flashing an Application to Arduino Due</h4>
<p>The sample application <a class="reference internal" href="../../../../samples/hello_world/README.html#hello-world"><span class="std std-ref">Hello World</span></a> will be used in this tutorial, which can
be found in <code class="file docutils literal"><span class="pre">$ZEPHYR_BASE/samples/hello_world</span></code>.</p>
<ol class="arabic">
<li><p class="first">To build the Zephyr kernel, enter:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> <span class="nv">$ZEPHYR_BASE</span>
<span class="gp">$</span> make -C samples/hello_world <span class="nv">BOARD</span><span class="o">=</span>arduino_due
</pre></div>
</div>
</li>
<li><p class="first">Connect the Arduino Due to your host computer using the programming port.</p>
</li>
<li><p class="first">Press the Erase button for more than 220 ms.</p>
</li>
<li><p class="first">Press the Reset button so the board will boot into the SAM-BA bootloader.</p>
</li>
<li><p class="first">To flash the kernel onto Arduino Due, assuming the bossa tool already
exists. Using the command line version of bossa, enter:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> bossac -p &lt;tty_device&gt; -e -w -v -b outdir/arduino_due/zephyr.bin
</pre></div>
</div>
<p>Where <code class="code docutils literal"><span class="pre">&lt;tty_device&gt;</span></code> is where the Arduino Due can be found. For
example, under Linux, <code class="code docutils literal"><span class="pre">&lt;tty_device&gt;</span></code> should be <code class="code docutils literal"><span class="pre">ttyACM0</span></code>.
Note that the path <code class="file docutils literal"><span class="pre">/dev/</span></code> is omitted.</p>
</li>
<li><p class="first">Run your favorite terminal program to listen for output. For example, under
Linux, the terminal should be <code class="code docutils literal"><span class="pre">/dev/ttyACM0</span></code>. For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> minicom -D /dev/ttyACM0 -o
</pre></div>
</div>
<p>The -o option tells minicom not to send the modem initialization
string.</p>
</li>
<li><p class="first">Press the Reset button and you should see &#8220;Hello World!&#8221; in your terminal.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure your terminal program is closed before flashing the binary image,
or it will interfere with the flashing process.</p>
</div>
</div>
</div>
</div>
<div class="section" id="references">
<h2>References</h2>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../cc3200_launchxl/doc/cc3200_launchxl.html" class="btn btn-neutral float-right" title="CC3200 LaunchXL" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../arduino_101_ble/doc/board.html" class="btn btn-neutral" title="Arduino/Genuino 101 (BLE)" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Intel Corporation, Wind River Systems, Inc.
      Last updated on Jan 26, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.6.99',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>